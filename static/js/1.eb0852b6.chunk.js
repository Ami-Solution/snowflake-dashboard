webpackJsonp([1],{757:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(1),d=a.n(s),l=a(21),i=a.n(l),u=a(79),c=a.n(u),m=a(258),h=a.n(m),p=a(259),f=a.n(p),v=a(138),S=a.n(v),g=a(260),E=a.n(g),y=a(261),C=a.n(y),A=a(137),b=a.n(A),I=a(96),k=a.n(I),H=a(136),w=a.n(H),P=a(257),R=a.n(P),T=a(262),L=a.n(T),O=a(263),_=a.n(O),D=a(758),j=a.n(D),x=a(133),U=a.n(x),W=a(135),Y=a.n(W),F=a(134),K=a.n(F),V=a(264),M=a.n(V),N=a(46),z=a(28),B=(a.n(z),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}()),J=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={passedStandards:[],standardCounts:[],newStandard:"",messageStandard:"",messageAttest:"",allStandards:[],attestedHydroId:"",attestedStandard:"",lookupHydroId:"",currentHydroId:"",lookupStandardCounts:[],messageRemoveAttest:"",removeAttestHydroId:"",removeAttestedStandard:""},a.handleChangeStandard=a.handleChangeStandard.bind(a),a.handleSubmitStandard=a.handleSubmitStandard.bind(a),a.handleChangeHydroId=a.handleChangeHydroId.bind(a),a.handleChangeAttest=a.handleChangeAttest.bind(a),a.handleSubmitAttest=a.handleSubmitAttest.bind(a),a.handleChangeRemoveHydroId=a.handleChangeRemoveHydroId.bind(a),a.handleChangeRemoveAttest=a.handleChangeRemoveAttest.bind(a),a.handleSubmitRemoveAttest=a.handleSubmitRemoveAttest.bind(a),a.handleChangeHydroIdLookup=a.handleChangeHydroIdLookup.bind(a),a.handleSubmitLoad=a.handleSubmitLoad.bind(a),a}return o(t,e),B(t,[{key:"getPassedStandards",value:function(e){var t=this;this.props.resolverContract.methods.getPassedStandards(e).call().then(function(a){var n=a.map(function(e){return t.props.resolverContract.methods.getStandardString(e).call()});Promise.all(n).then(function(a){t.getNumberOfAttestations(a,e),t.setState({passedStandards:a})})})}},{key:"getNumberOfAttestations",value:function(e,t){var a=this,n=[],r=e.map(function(e){return a.props.resolverContract.methods.getAttestationCountToUser(e,t).call()});Promise.all(r).then(function(t){for(var r=e.length,o=0;o<r;o++)n[o]={},n[o].standard=e[o],n[o].attestations=parseInt(t[o],10);a.setState({standardCounts:n})})}},{key:"handleSubmitLoad",value:function(e){e.preventDefault(),this.getPassedStandardsLookup(this.state.lookupHydroId),this.setState({currentHydroId:this.state.lookupHydroId})}},{key:"handleChangeHydroIdLookup",value:function(e){this.setState({lookupHydroId:e.target.value})}},{key:"getPassedStandardsLookup",value:function(e){var t=this;this.props.resolverContract.methods.getPassedStandards(e).call().then(function(a){var n=a.map(function(e){return t.props.resolverContract.methods.getStandardString(e).call()});Promise.all(n).then(function(a){t.getNumberOfAttestationsLookup(a,e)})})}},{key:"getNumberOfAttestationsLookup",value:function(e,t){var a=this,n=[],r=e.map(function(e){return a.props.resolverContract.methods.getAttestationCountToUser(e,t).call()});Promise.all(r).then(function(t){for(var r=e.length,o=0;o<r;o++)n[o]={},n[o].standard=e[o],n[o].attestations=parseInt(t[o],10);a.setState({lookupStandardCounts:n})})}},{key:"getAllStandards",value:function(){var e=this;this.props.resolverContract.methods.getAllStandards().call().then(function(t){var a=t.map(function(t){return e.props.resolverContract.methods.getStandardString(t).call()});Promise.all(a).then(function(t){e.setState({allStandards:t,removeAttestedStandard:t[0],attestedStandard:t[0]})})})}},{key:"componentDidMount",value:function(){this.getPassedStandards(this.props.hydroId),this.getAllStandards()}},{key:"handleChangeStandard",value:function(e){this.setState({newStandard:e.target.value})}},{key:"handleSubmitStandard",value:function(e){e.preventDefault(),this.sendTransactionStandard()}},{key:"sendTransactionStandard",value:function(){var e=this,t=this.props.resolverContract.methods.addKYCStandard(this.state.newStandard);this.props.w3w.sendTransaction(t,{error:function(t,a){console.error(t),e.setState({messageStandard:d.a.createElement("p",null,a)})},transactionHash:function(t){e.setState({messageStandard:d.a.createElement("a",{href:e.props.w3w.etherscanFormat("transaction",t),target:"_blank"},"Pending")})},confirmation:function(t,a){0===t&&(e.setState({messageStandard:d.a.createElement("p",null,"Success!")}),e.getAllStandards())}})}},{key:"handleChangeHydroId",value:function(e){this.setState({attestedHydroId:e.target.value})}},{key:"handleChangeAttest",value:function(e){this.setState({attestedStandard:e.target.value})}},{key:"handleSubmitAttest",value:function(e){e.preventDefault(),this.sendTransactionAttest()}},{key:"sendTransactionAttest",value:function(){var e=this,t=this.props.resolverContract.methods.attestToUsersKYC(this.state.attestedStandard,this.state.attestedHydroId);this.props.w3w.sendTransaction(t,{error:function(t,a){console.error(t),e.setState({messageAttest:d.a.createElement("p",null,a)})},transactionHash:function(t){e.setState({messageAttest:d.a.createElement("a",{href:e.props.w3w.etherscanFormat("transaction",t),target:"_blank"},"Pending")})},confirmation:function(t,a){0===t&&(e.setState({messageAttest:d.a.createElement("p",null,"Success!")}),e.getPassedStandards())}})}},{key:"handleChangeRemoveHydroId",value:function(e){this.setState({removeAttestHydroId:e.target.value})}},{key:"handleChangeRemoveAttest",value:function(e){this.setState({removeAttestedStandard:e.target.value})}},{key:"handleSubmitRemoveAttest",value:function(e){e.preventDefault(),this.sendTransactionRemoveAttest()}},{key:"sendTransactionRemoveAttest",value:function(){var e=this,t=this.props.resolverContract.methods.removeUserKYC(this.state.removeAttestedStandard,this.state.removeAttestHydroId);this.props.w3w.sendTransaction(t,{error:function(t,a){console.error(t),e.setState({messageRemoveAttest:d.a.createElement("p",null,a)})},transactionHash:function(t){e.setState({messageRemoveAttest:d.a.createElement("a",{href:e.props.w3w.etherscanFormat("transaction",t),target:"_blank"},"Pending")})},confirmation:function(t,a){0===t&&e.setState({messageRemoveAttest:d.a.createElement("p",null,"Success!")})}})}},{key:"render",value:function(){var e=this,t=this.state.standardCounts.map(function(e){return d.a.createElement(q,{key:e.standard,data:e})}),a=this.state.lookupStandardCounts.map(function(e){return d.a.createElement(q,{key:e.standard,data:e})}),n=this.state.allStandards.map(function(e){return d.a.createElement(b.a,{key:e,value:e},e)});return d.a.createElement("div",null,d.a.createElement(U.a,{hidden:!this.props.hydroId},d.a.createElement(Y.a,{expandIcon:d.a.createElement(M.a,null)},d.a.createElement(i.a,null,"Your Passed Standards")),d.a.createElement(K.a,null,d.a.createElement("div",{style:{width:"100%"}},d.a.createElement(h.a,null,d.a.createElement(E.a,null,d.a.createElement(C.a,null,d.a.createElement(S.a,null,"Standard"),d.a.createElement(S.a,{numeric:!0},"Attestations"))),d.a.createElement(f.a,null,t))))),d.a.createElement(U.a,null,d.a.createElement(Y.a,{expandIcon:d.a.createElement(M.a,null)},d.a.createElement(i.a,null,"Add A Standard")),d.a.createElement(K.a,null,d.a.createElement("div",{style:{width:"100%"}},d.a.createElement("form",{noValidate:!0,autoComplete:"off"},d.a.createElement(L.a,{margin:"normal",onChange:this.handleChangeStandard,label:"Standard",InputProps:{startAdornment:d.a.createElement(R.a,{position:"start"},d.a.createElement(j.a,null))},fullWidth:!0}),d.a.createElement(N.a,{buttonInitial:"Add A Standard",method:this.props.resolverContract.methods.addKYCStandard(this.state.newStandard),onConfirmation:function(){e.getAllStandards()}}))))),d.a.createElement(U.a,null,d.a.createElement(Y.a,{expandIcon:d.a.createElement(M.a,null)},d.a.createElement(i.a,null,"Attest To A Standard")),d.a.createElement(K.a,null,d.a.createElement("div",{style:{width:"100%"}},d.a.createElement("form",{noValidate:!0,autoComplete:"off"},d.a.createElement(w.a,{htmlFor:"standard-simple"},"Standard"),d.a.createElement(k.a,{value:this.state.attestedStandard,onChange:this.handleChangeAttest,inputProps:{name:"standard",id:"standard-simple"},fullWidth:!0},n),d.a.createElement(L.a,{margin:"normal",value:this.state.attestedHydroId,onChange:this.handleChangeHydroId,label:"HydroID",InputProps:{startAdornment:d.a.createElement(R.a,{position:"start"},d.a.createElement(_.a,null))},fullWidth:!0}),d.a.createElement(N.a,{buttonInitial:"Attest To A Standard",method:this.props.resolverContract.methods.attestToUsersKYC(this.state.attestedStandard,this.state.attestedHydroId),onConfirmation:function(){e.getPassedStandards()}}))))),d.a.createElement(U.a,null,d.a.createElement(Y.a,{expandIcon:d.a.createElement(M.a,null)},d.a.createElement(i.a,null,"Remove Attestation To A Standard")),d.a.createElement(K.a,null,d.a.createElement("div",{style:{width:"100%"}},d.a.createElement("form",{noValidate:!0,autoComplete:"off"},d.a.createElement(w.a,{htmlFor:"standard-remove-simple"},"Standard"),d.a.createElement(k.a,{value:this.state.removeAttestedStandard,onChange:this.handleChangeRemoveAttest,inputProps:{name:"standard-remove",id:"standard-remove-simple"},fullWidth:!0},n),d.a.createElement(L.a,{margin:"normal",value:this.state.removeAttestHydroId,onChange:this.handleChangeRemoveHydroId,label:"HydroID",InputProps:{startAdornment:d.a.createElement(R.a,{position:"start"},d.a.createElement(_.a,null))},fullWidth:!0}),d.a.createElement(N.a,{buttonInitial:"Remove Attestation",method:this.props.resolverContract.methods.removeUserKYC(this.state.removeAttestedStandard,this.state.removeAttestHydroId),onConfirmation:function(){e.getPassedStandards()}}))))),d.a.createElement(U.a,null,d.a.createElement(Y.a,{expandIcon:d.a.createElement(M.a,null)},d.a.createElement(i.a,null,"Load HydroID Info")),d.a.createElement(K.a,null,d.a.createElement("div",{style:{width:"100%"}},d.a.createElement("form",{noValidate:!0,autoComplete:"off"},d.a.createElement(L.a,{margin:"normal",value:this.state.lookupHydroId,onChange:this.handleChangeHydroIdLookup,label:"HydroID",InputProps:{startAdornment:d.a.createElement(R.a,{position:"start"},d.a.createElement(_.a,null))},fullWidth:!0}),d.a.createElement(c.a,{variant:"contained",color:"primary",onClick:this.handleSubmitLoad},"Load HydroID Info")),d.a.createElement("div",{style:{width:"100%"},hidden:0===a.length},d.a.createElement(i.a,{variant:"display1",gutterBottom:!0,align:"center",color:"textPrimary"},this.state.currentHydroId," Passed Standards"),d.a.createElement(h.a,null,d.a.createElement(E.a,null,d.a.createElement(C.a,null,d.a.createElement(S.a,null,"Standard"),d.a.createElement(S.a,{numeric:!0},"Attestations"))),d.a.createElement(f.a,null,a)))))))}}]),t}(s.Component),q=function(e){return d.a.createElement(C.a,null,d.a.createElement(S.a,null,e.data.standard),d.a.createElement(S.a,{numeric:!0},e.data.attestations))};t.default=Object(z.withWeb3)(J)},758:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(1)),o=n(a(42)),s=(0,o.default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.default.createElement("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"})),"VerifiedUser");t.default=s}});
//# sourceMappingURL=1.eb0852b6.chunk.js.map